<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panduan Diet - Member Area</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 30px;
  background: #f4f4f4;
}
.container {
  max-width: 800px;
  margin: auto;
  background: white;
  padding: 30px;
  border-radius: 12px;
}
h1 { text-align: center; }
.error {
  text-align: center;
  color: red;
  font-weight: bold;
}
.hidden { display: none; }
</style>
</head>
<body>

<div id="errorBox" class="error hidden"></div>

<div id="content" class="container hidden">
  <h1>Panduan Program Diet</h1>
  <p>Selamat datang di area member.</p>

  <h3>Pilih Program Diet:</h3>
  <ul>
    <li>Diet Defisit Kalori</li>
    <li>Diet Intermittent Fasting</li>
    <li>Diet Tinggi Protein</li>
  </ul>

  <h3>Rekomendasi Olahraga:</h3>
  <ul>
    <li>Walking 30 menit</li>
    <li>Angkat beban ringan</li>
    <li>HIIT 2x seminggu</li>
  </ul>

  <p>Silakan sesuaikan program sesuai kebutuhan Anda.</p>
</div>

<script>

const SCRIPT_URL = "PASTE_URL_APPS_SCRIPT_LU_DI_SINI";

function getKode() {
  const params = new URLSearchParams(window.location.search);
  return params.get("kode");
}

function showError(msg) {
  const errorBox = document.getElementById("errorBox");
  errorBox.innerText = msg;
  errorBox.classList.remove("hidden");
}

async function cekAkses() {

  const kode = getKode();

  if (!kode) {
    showError("Kode tidak ditemukan.");
    return;
  }

  try {

    const response = await fetch(`${SCRIPT_URL}?action=check&kode=${encodeURIComponent(kode)}`);
    const data = await response.json();

    if (data.status === "ACTIVE" || data.status === "USED") {
      document.getElementById("content").classList.remove("hidden");
    } else {
      showError("Kode tidak aktif atau sudah expired.");
    }

  } catch (err) {
    showError("Koneksi ke server bermasalah.");
  }
}

cekAkses();

</script>

</body>
</html>
